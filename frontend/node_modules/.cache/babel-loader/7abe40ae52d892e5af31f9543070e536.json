{"ast":null,"code":"import _regeneratorRuntime from\"/home/filip/Desktop/facial-animation/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/filip/Desktop/facial-animation/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/filip/Desktop/facial-animation/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/filip/Desktop/facial-animation/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"/home/filip/Desktop/facial-animation/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/filip/Desktop/facial-animation/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/filip/Desktop/facial-animation/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";// https://serverless-stack.com/chapters/create-a-login-page.html\nimport React,{Component}from\"react\";import{Button,FormGroup,FormControl,FormLabel}from\"react-bootstrap\";// import \"./Login.css\";\nimport axios from'axios';import{login,authFetch,useAuth,logout}from\"../auth\";var Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(props){var _this;_classCallCheck(this,Login);_this=_super.call(this,props);_this.state={username:\"\",password:\"\",status:\"FALSE\"};// const history = useHistory();\n_this.validateForm=_this.validateForm.bind(_assertThisInitialized(_this));_this.validateData=_this.validateData.bind(_assertThisInitialized(_this));_this.setUsername=_this.setUsername.bind(_assertThisInitialized(_this));_this.setPassword=_this.setPassword.bind(_assertThisInitialized(_this));return _this;}_createClass(Login,[{key:\"validateForm\",value:function validateForm(){return this.state.username.length>0&&this.state.password.length>0;}},{key:\"handleSubmit\",value:function handleSubmit(e){e.preventDefault();}},{key:\"validateData\",value:function(){var _validateData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var userData,res,token;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:userData=JSON.stringify({username:this.state.username,password:this.state.password});_context.next=3;return axios.post('/api/login',userData,{});case 3:res=_context.sent;token=res.data;if(token.access_token){login(token);console.log(token);}else{console.log(\"Please type in correct username/password\");}case 6:case\"end\":return _context.stop();}}},_callee,this);}));function validateData(){return _validateData.apply(this,arguments);}return validateData;}()},{key:\"setUsername\",value:function setUsername(e){this.setState({username:e.target.value});}},{key:\"setPassword\",value:function setPassword(e){this.setState({password:e.target.value});}},{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",{className:\"Login\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(FormGroup,{id:\"username\",bssize:\"large\"},/*#__PURE__*/React.createElement(FormLabel,null,\"Username\"),/*#__PURE__*/React.createElement(FormControl,{id:\"username-form\",autoFocus:true,type:\"text\",value:this.state.username,onChange:this.setUsername})),/*#__PURE__*/React.createElement(FormGroup,{id:\"password\",bssize:\"large\"},/*#__PURE__*/React.createElement(FormLabel,null,\"Password\"),/*#__PURE__*/React.createElement(FormControl,{id:\"password-form\",value:this.state.password,onChange:this.setPassword,type:\"password\"})),/*#__PURE__*/React.createElement(Button,{id:\"login-button\",block:true,bssize:\"large\",disabled:!this.validateForm(),type:\"submit\",onClick:this.validateData},\"Login\")));}}]);return Login;}(Component);export default Login;","map":{"version":3,"sources":["/home/filip/Desktop/facial-animation/frontend/src/components/Login.js"],"names":["React","Component","Button","FormGroup","FormControl","FormLabel","axios","login","authFetch","useAuth","logout","Login","props","state","username","password","status","validateForm","bind","validateData","setUsername","setPassword","length","e","preventDefault","userData","JSON","stringify","post","res","token","data","access_token","console","log","setState","target","value","handleSubmit"],"mappings":"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","sourcesContent":["// https://serverless-stack.com/chapters/create-a-login-page.html\nimport React, { Component } from \"react\";\nimport { Button, FormGroup, FormControl, FormLabel } from \"react-bootstrap\";\n// import \"./Login.css\";\nimport axios from 'axios';\nimport {login, authFetch, useAuth, logout} from \"../auth\"\n\nclass Login extends Component {\n  constructor(props){\n    super(props)\n    this.state={\n      username : \"\",\n      password : \"\",\n      status : \"FALSE\"\n    }\n  // const history = useHistory();\n  this.validateForm = this.validateForm.bind(this)\n  this.validateData = this.validateData.bind(this)\n  this.setUsername = this.setUsername.bind(this)\n  this.setPassword = this.setPassword.bind(this)\n  }\n\n  validateForm() {\n    return this.state.username.length > 0 && this.state.password.length > 0;\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n  }\n\n  async validateData(){\n    const userData = JSON.stringify({username : this.state.username, password : this.state.password})\n    const res = await axios.post('/api/login', userData, {});\n    var token = res.data\n    if(token.access_token){\n      login(token)\n      console.log(token)\n    }\n    else{\n      console.log(\"Please type in correct username/password\")\n    }\n  }\n\n  setUsername(e){\n    this.setState({\n      username: e.target.value\n    })\n  }\n\n  setPassword(e){\n    this.setState({\n      password: e.target.value\n    })\n  }\n\n  render(){\n    return (\n    <div className=\"Login\">\n      <form onSubmit={this.handleSubmit}>\n        <FormGroup id=\"username\" bssize=\"large\">\n          <FormLabel>Username</FormLabel>\n          <FormControl\n            id=\"username-form\"\n            autoFocus\n            type=\"text\"\n            value={this.state.username}\n            onChange={this.setUsername}\n          />\n        </FormGroup>\n        <FormGroup id=\"password\" bssize=\"large\">\n          <FormLabel>Password</FormLabel>\n          <FormControl\n            id=\"password-form\"\n            value={this.state.password}\n            onChange={this.setPassword}\n            type=\"password\"\n          />\n        </FormGroup>\n        <Button id=\"login-button\" block bssize=\"large\" disabled={!this.validateForm()} type=\"submit\" onClick={this.validateData}>\n          Login\n        </Button>\n      </form>\n    </div>\n  );\n  }\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}