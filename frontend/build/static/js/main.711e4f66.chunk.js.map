{"version":3,"sources":["components/Model.js","components/AudioRecorder.js","auth/index.js","components/View.js","components/Login.js","App.js","serviceWorker.js","index.js"],"names":["Model","props","state","animationStatus","intensity","sliderValue","visemes","undefined","visemesNames","move","delta","modelControlActive","currentFrame","lidMove","lidSpeed","lidWait","exponent","obamaRatio","start","bind","animate","onWindowResize","addCube","addModel","getMouthControl","getModelControl","moveLid","nextViseme","resetModel","width","window","innerWidth","height","innerHeight","this","scene","THREE","camera","renderer","antialias","alpha","light","add","position","set","castShadow","z","y","controls","OrbitControls","domElement","update","setClearColor","setSize","addEventListener","mount","appendChild","prevProps","setState","Set","console","log","x","geometry","translate","material","color","cube","GLTFLoader","load","gltf","model","SkeletonUtils","clone","renderScene","error","aspect","updateProjectionMatrix","removeChild","frameId","requestAnimationFrame","traverse","o","isMesh","name","modelControl","morphTargetInfluences","modelControlDict","morphTargetDictionary","point1","point2","Math","sqrt","pow","currViseme","prevViseme","visemeName","i","length","render","ref","Component","AudioRecorder","startRecording","record","stopRecording","onData","recordedBlob","onStop","newRecording","File","blob","type","lastModified","Date","now","onSave","downloadLinkURL","blobURL","id","className","strokeColor","backgroundColor","mimeType","noiseSuppression","onClick","href","download","React","createAuthProvider","accessTokenKey","onUpdateToken","token","fetch","method","body","access_token","then","r","json","useAuth","authFetch","login","defaultStyle","transition","opacity","transitionStyles","entering","entered","exiting","exited","View","file","inputProcessed","popup","popupText","play","pause","stop","processResponse","fetchInput","playAnimation","pauseAnimation","stopAnimation","handleFile","sendFile","handleSlider","handleRecording","openPopup","closePopup","audio","Audio","loop","mounted","res","data","response","result","frame","j","slice","push","array","modeMap","maxEl","maxCount","el","currentTime","event","target","files","fileData","fileSource","URL","createObjectURL","filename","src","recording","FormData","append","status","message","value","text","Transition","in","style","accept","onChange","multiple","min","max","step","Login","username","password","validateForm","validateData","setUsername","setPassword","e","preventDefault","userData","JSON","stringify","axios","post","onSubmit","handleSubmit","FormGroup","bssize","FormLabel","FormControl","autoFocus","Button","block","disabled","App","logged","path","to","Boolean","location","hostname","match","ReactDOM","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch"],"mappings":"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","file":"static/js/main.711e4f66.chunk.js","sourcesContent":["import React, { Component } from 'react'\nimport * as THREE from 'three'\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader.js';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js'\nimport { SkeletonUtils } from 'three/examples/jsm/utils/SkeletonUtils.js'\n\n\nclass Model extends Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n        animationStatus: this.props.animationStatus,\n        intensity: this.props.sliderValue\n    }\n\n    this.visemes = undefined\n    this.visemesNames = undefined\n\n    this.move = 0.02\n    this.delta = 0\n\n    this.modelControlActive = false\n\n    this.currentFrame = 1\n\n    this.lidMove = 0.1\n    this.lidSpeed = 0.1\n    this.lidWait = 1\n\n    this.exponent = 6\n\n    this.obamaRatio = [0.8, 0.8]\n\n    this.start = this.start.bind(this)\n    this.animate = this.animate.bind(this)\n    this.onWindowResize = this.onWindowResize.bind(this)\n    this.addCube = this.addCube.bind(this)\n    this.addModel = this.addModel.bind(this)\n    this.getMouthControl = this.getModelControl.bind(this)\n    this.moveLid = this.moveLid.bind(this)\n    this.nextViseme = this.nextViseme.bind(this)\n    this.resetModel = this.resetModel.bind(this)\n  }\n\n  componentDidMount() {\n    const width = window.innerWidth\n    const height = window.innerHeight\n\n    this.scene = new THREE.Scene()\n    this.camera = new THREE.PerspectiveCamera(\n      75,\n      width / height,\n      0.1,\n      1000\n    )\n    this.renderer = new THREE.WebGLRenderer({ antialias: true , alpha:true})\n\n    var light = new THREE.HemisphereLight(0xBEDDED, 0xDECADE, 0.55);\n    this.scene.add(light)\n    light = new THREE.SpotLight(0xffffff, 0.75);\n    light.position.set(-80,100,100);\n    light.castShadow = true;\n    this.scene.add(light)\n\n    this.addModel()\n\n    this.camera.position.z = 0.5\n    this.camera.position.y = 0\n\n    this.controls = new OrbitControls(this.camera, this.renderer.domElement);\n    this.controls.update();\n\n    this.renderer.setClearColor('#ffffff')\n    this.renderer.setSize(width, height)\n\n    window.addEventListener('resize', this.onWindowResize, false);\n\n    this.mount.appendChild(this.renderer.domElement)\n\n    this.start()\n  }\n\n  componentDidUpdate(prevProps){\n      if(prevProps.animationStatus !== this.props.animationStatus){\n          this.setState({\n              animationStatus: this.props.animationStatus\n          })\n      }\n      if(prevProps.visemes !== this.props.visemes){\n        this.visemes = this.props.visemes\n        this.visemesNames = [...new Set(this.props.visemes)]\n        this.currentFrame = 1\n        console.log(this.visemes)\n        console.log(this.visemesNames)\n    }\n    if(prevProps.sliderValue !== this.props.sliderValue){\n      this.setState({\n        intensity: this.props.sliderValue\n      })\n    }\n  }\n\n\n  addCube(x, y, z) {\n    var geometry = new THREE.BoxGeometry(.1,.1,.1)\n    geometry.translate(x, y, z)\n    var material = new THREE.MeshBasicMaterial({ color: '#433F81' })\n    var cube = new THREE.Mesh(geometry, material)\n    this.scene.add(cube)\n  }\n\n  addModel() {\n    var loader = new GLTFLoader();\n\n    loader.load('model/head_visemes.gltf', gltf => {\n      this.model = SkeletonUtils.clone(gltf.scene)\n      console.log(this.model)\n      this.scene.add(this.model)\n      this.getModelControl()\n      this.renderScene()\n    }, undefined, function (error) {\n      console.error(error);\n    }\n    )\n  }\n\n  onWindowResize() {\n    this.camera.aspect = window.innerWidth / window.innerHeight;\n    this.camera.updateProjectionMatrix();\n\n    this.renderer.setSize(window.innerWidth, window.innerHeight);\n\n  }\n\n  componentWillUnmount() {\n    this.mount.removeChild(this.renderer.domElement)\n  }\n\n  start() {\n    if (!this.frameId) {\n      this.frameId = requestAnimationFrame(this.animate)\n    }\n  }\n\n\n  getModelControl() {\n    if (this.model) {\n      this.model.traverse(o => {\n        if (o.isMesh && o.name === 'head') {\n          this.modelControl = o.morphTargetInfluences;\n          this.modelControlDict = o.morphTargetDictionary;\n          this.modelControlActive = true\n        }\n      })\n    }\n  }\n\n\n  calculateDistance(point1, point2) {\n    return Math.sqrt(Math.pow(point1[0] - point2[0], 2) + Math.pow(point1[1] - point2[1], 2))\n  }\n\n\n  moveLid(){\n    if(this.modelControl[this.modelControlDict['wink']] <= 0){\n      if (this.lidWait > 100){\n        this.lidMove = this.lidSpeed;\n        this.lidWait = 0\n      }\n      else {\n        this.lidMove = 0\n      }\n      this.lidWait += 1\n    }\n    else if (this.modelControl[this.modelControlDict['wink']] > 1) {\n      this.lidMove = -this.lidMove;\n    }\n\n    this.modelControl[this.modelControlDict['wink']] = this.modelControl[this.modelControlDict['wink']] + this.lidMove;\n  }\n\n  nextViseme(){\n    if(this.currentFrame < 1)\n      this.currentFrame = 1\n\n    var currViseme = this.visemes[this.currentFrame]\n    var prevViseme = this.visemes[this.currentFrame-1]\n    for(var visemeName of this.visemesNames){\n      if(visemeName === currViseme){\n        this.modelControl[this.modelControlDict[visemeName]] += this.state.intensity / this.exponent //Math.pow(this.state.intensity, this.exponent)\n        if(this.modelControl[this.modelControlDict[visemeName]]>1)\n          this.modelControl[this.modelControlDict[visemeName]] = 1\n      }\n      else{\n        this.modelControl[this.modelControlDict[visemeName]] -= this.state.intensity / (10-this.exponent) //Math.pow(this.state.intensity, this.exponent)\n        if(this.modelControl[this.modelControlDict[visemeName]]<0)\n          this.modelControl[this.modelControlDict[visemeName]] = 0\n      }\n    }\n\n    if(currViseme === prevViseme){\n      this.exponent -= 1\n      if(this.exponent < 2) this.exponent = 2;\n    }\n    else\n      this.exponent = 8\n  }\n\n  resetModel(){\n    this.lidWait = 0\n    if(this.modelControl){\n      for(var i=0; i<this.modelControl.length; i++){\n        this.modelControl[i] = 0;\n      }\n    }\n  }\n\n  animate() {\n    if (this.state.animationStatus === 'PLAY' && this.modelControlActive) {\n      this.nextViseme()\n      this.moveLid()\n\n      if (this.currentFrame >= this.visemes.length) {\n        this.currentFrame = 0\n      }\n\n      this.currentFrame += 1\n    }\n    else if(this.state.animationStatus === \"STOP\"){\n        this.currentFrame = 1\n        this.resetModel()\n    }\n\n    this.controls.update()\n    this.renderScene()\n    this.frameId = window.requestAnimationFrame(this.animate)\n  }\n\n  renderScene() {\n    this.renderer.render(this.scene, this.camera)\n  }\n\n  render() {\n    return (\n        <div\n          ref={(mount) => { this.mount = mount }}\n        />\n    )\n  }\n}\n\nexport default Model","import React, { Component } from 'react'\nimport { ReactMic } from 'react-mic';\nimport './AudioRecorder.css'\n\nclass AudioRecorder extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      record: false,\n      downloadLinkURL: null\n    }\n  }\n\n  startRecording = () => {\n    this.setState({ record: true });\n  }\n\n  stopRecording = () => {\n    this.setState({ record: false });\n  }\n\n  onData = (recordedBlob) => {\n    // console.log('chunk of real-time data is: ', recordedBlob);\n  }\n\n  onStop = (recordedBlob) => {\n    console.log('recordedBlob is: ', recordedBlob);\n    this.props.newRecording(new File([recordedBlob.blob], \"recording.wav\", {type: 'audio/wav', lastModified: Date.now()}))\n    // this.props.newRecording(recordedBlob.blobURL)\n\n  }\n\n  onSave = (recordedBlob) => {\n    this.setState({\n        downloadLinkURL: recordedBlob.blobURL\n    })\n  }\n\n  render() {\n    return (\n      <div id=\"recorder-container\">\n        <ReactMic\n          record={this.state.record}\n          className=\"sound-wave\"\n          onStop={this.onStop}\n          onData={this.onData}\n          onSave={this.onSave}\n          strokeColor=\"#000000\"\n          backgroundColor=\"#FFFFFF\"\n          mimeType=\"audio/wav\"\n          width={100}\n          height={50}\n          noiseSuppression={true}  />\n        <button className=\"record-button record\" onClick={this.startRecording} type=\"button\">Start</button>\n        <button className=\"record-button record\" onClick={this.stopRecording} type=\"button\">Stop</button>\n        <a className=\"record\" href={this.state.downloadLinkURL} download=\"recording.wav\">Download</a>\n      </div>\n    );\n  }\n}\n\nexport default AudioRecorder","import {createAuthProvider} from 'react-token-auth';\n\n\nexport const [useAuth, authFetch, login, logout] =\n    createAuthProvider({\n        accessTokenKey: 'access_token',\n        onUpdateToken: (token) => fetch('/api/refresh', {\n            method: 'POST',\n            body: token.access_token\n        })\n        .then(r => r.json())\n    });","import React, { Component } from \"react\";\nimport \"./View.css\";\nimport Model from \"./Model.js\";\nimport axios from \"axios\";\nimport AudioRecorder from \"./AudioRecorder.js\";\nimport \"./Slider.css\";\nimport { Transition } from \"react-transition-group\";\nimport { login, authFetch, useAuth, logout } from \"../auth\";\n\nconst AUDIO_FRAME = 10;\nconst FPS = 60;\n\nconst defaultStyle = {\n  transition: `opacity ${300}ms ease-in-out`,\n  opacity: 0,\n};\n\nconst transitionStyles = {\n  entering: { opacity: 1 },\n  entered: { opacity: 1 },\n  exiting: { opacity: 0 },\n  exited: { opacity: 0 },\n};\n\nclass View extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      file: undefined,\n      animationStatus: \"STOP\",\n      visemes: undefined,\n      inputProcessed: false,\n      sliderValue: 0.4,\n      popup: false,\n      popupText: \"\",\n    };\n\n    this.move = 0.02;\n    this.delta = 0;\n\n    this.modelControlActive = false;\n\n    this.currentFrame = 0;\n\n    this.lidMove = 0.1;\n    this.lidSpeed = 0.1;\n    this.lidWait = 1;\n\n    this.play = this.play.bind(this);\n    this.pause = this.pause.bind(this);\n    this.stop = this.stop.bind(this);\n    this.processResponse = this.processResponse.bind(this);\n    this.fetchInput = this.fetchInput.bind(this);\n    this.playAnimation = this.playAnimation.bind(this);\n    this.pauseAnimation = this.pauseAnimation.bind(this);\n    this.stopAnimation = this.stopAnimation.bind(this);\n    this.handleFile = this.handleFile.bind(this);\n    this.sendFile = this.sendFile.bind(this);\n    this.handleSlider = this.handleSlider.bind(this);\n    this.handleRecording = this.handleRecording.bind(this);\n    this.openPopup = this.openPopup.bind(this);\n    this.closePopup = this.closePopup.bind(this);\n  }\n\n  componentDidMount() {\n    this.fetchInput();\n\n    this.audio = new Audio();\n    this.audio.loop = true;\n    this.setState({\n      mounted: true,\n    });\n  }\n\n  componentDidUpdate() {}\n\n  fetchInput() {\n    fetch(\"/api/time\")\n      .then((res) => res.json())\n      .then((data) => {\n        console.log(data);\n      });\n  }\n\n  calculateDistance(point1, point2) {\n    return Math.sqrt(\n      Math.pow(point1[0] - point2[0], 2) + Math.pow(point1[1] - point2[1], 2)\n    );\n  }\n\n  processResponse(response) {\n    const step = 1000 / AUDIO_FRAME / FPS;\n    var result = [],\n      frame = undefined,\n      j = undefined;\n    for (var i = 0; i < response.length; i += step) {\n      // change the frequency of the visemes from 100Hz to 60Hz\n      frame = response.slice(i, i + step)[0];\n      result.push(frame);\n      j = result.length - 1;\n      if (j >= 3) {\n        // eliminate singular visemes\n        if (result[j - 2] !== result[j - 1] && result[j - 1] !== result[j]) {\n          result[result.length - 2] = result[result.length - 3];\n        }\n      }\n      if (j >= 4) {\n        // eliminate double visemes\n        if (result[j] !== result[j - 1]) {\n          if (\n            !(\n              result[j - 1] === result[j - 2] && result[j - 2] === result[j - 3]\n            )\n          ) {\n            result[j - 1] = result[j];\n            result[j - 2] = result[j - 3];\n          }\n        }\n      }\n    }\n    this.setState({\n      visemes: result,\n      inputProcessed: true,\n    });\n  }\n\n  maxElement(array) {\n    if (array.length === 0) return null;\n    var modeMap = {};\n    var maxEl = array[0],\n      maxCount = 1;\n    for (var i = 0; i < array.length; i++) {\n      var el = array[i];\n      if (modeMap[el] == null) modeMap[el] = 1;\n      else modeMap[el]++;\n      if (modeMap[el] > maxCount) {\n        maxEl = el;\n        maxCount = modeMap[el];\n      }\n    }\n    return maxEl;\n  }\n\n  stop() {\n    if (\n      this.state.animationStatus === \"PLAY\" ||\n      this.state.animationStatus === \"PAUSE\"\n    ) {\n      this.audio.pause();\n      this.audio.currentTime = 0;\n      this.setState({ animationStatus: \"STOP\" });\n    }\n  }\n\n  play() {\n    if (\n      this.state.animationStatus === \"STOP\" ||\n      this.state.animationStatus === \"PAUSE\"\n    ) {\n      this.audio.play();\n      this.setState({ animationStatus: \"PLAY\" });\n    }\n  }\n\n  pause() {\n    if (this.state.animationStatus === \"PLAY\") {\n      this.audio.pause();\n      this.setState({ animationStatus: \"PAUSE\" });\n    }\n  }\n\n  playAnimation() {\n    if (!this.state.inputProcessed) {\n      this.openPopup(\"Upload the audio file to the server!\");\n    } else {\n      this.play();\n    }\n  }\n\n  stopAnimation() {\n    if (!this.state.inputProcessed) {\n      this.openPopup(\"Upload the audio file to the server!\");\n    } else {\n      this.stop();\n    }\n  }\n\n  pauseAnimation() {\n    if (!this.state.inputProcessed) {\n      this.openPopup(\"Upload the audio file to the server!\");\n    } else {\n      this.pause();\n    }\n  }\n\n  handleFile(event) {\n    console.log(event.target.files);\n    if (event.target.files.length > 0) {\n      var fileData = event.target.files[0];\n      var fileSource = URL.createObjectURL(fileData);\n\n      this.stop();\n      this.setState({\n        file: fileData,\n        inputProcessed: false,\n        filename: fileData.name,\n      });\n      this.audio.src = fileSource;\n    }\n  }\n\n  handleRecording(recording) {\n    this.stop();\n    this.setState({\n      file: recording,\n      inputProcessed: false,\n      filename: \"Recording\",\n    });\n    this.audio.src = URL.createObjectURL(recording);\n\n    console.log(this.state.file, this.audio.src);\n  }\n\n  async sendFile() {\n    if (this.state.file) {\n      const data = new FormData();\n      data.append(\"file\", this.state.file);\n\n      this.setState({ inputProcessed: undefined });\n      this.stop();\n\n      authFetch(\"/api/upload\", { method: \"POST\", body: data })\n        .then((res) => {\n          console.log(res);\n          if (res.status === 401) {\n            this.setState({ inputProcessed: false });\n            this.openPopup(\"Sorry you aren't authorized!\");\n            return null;\n          } else if (res.status !== 200) {\n            this.setState({ inputProcessed: false });\n            this.openPopup(\"Server failure!\");\n            return null;\n          }\n          return res.json();\n        })\n        .then((res) => {\n          console.log(res);\n          if (res) {\n            if (res.status === 200) {\n              this.processResponse(res.result);\n            } else if (res.message === \"Extension\") {\n              this.setState({ inputProcessed: false });\n              this.openPopup(\n                \"Incorrect extension! Upload .wav and .mp3 files.\"\n              );\n            } else if (res.message === \"Model\") {\n              this.setState({ inputProcessed: false });\n              this.openPopup(\"Model failure!\");\n            }\n          }\n        });\n    } else {\n      this.openPopup(\"Choose a file!\");\n    }\n  }\n\n  handleSlider(event) {\n    this.setState({\n      sliderValue: event.target.value,\n    });\n  }\n\n  openPopup(text) {\n    this.setState({\n      popup: true,\n      popupText: text,\n    });\n  }\n\n  closePopup() {\n    this.setState({\n      popup: false,\n      popupText: \"\",\n    });\n  }\n\n  render() {\n    return (\n      <div id=\"view-container\">\n        <Transition in={this.state.popup}>\n          {(state) => (\n            <div\n              style={{\n                ...defaultStyle,\n                ...transitionStyles[state],\n              }}\n            >\n              {this.state.popup && (\n                <div className=\"background\">\n                  <div className=\"popup\">\n                    <div id=\"popup-text\">{this.state.popupText}</div>\n                    <button id=\"popup-close\" onClick={this.closePopup}>\n                      X\n                    </button>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n        </Transition>\n        <Transition in={this.state.inputProcessed === undefined}>\n          {(state) => (\n            <div\n              style={{\n                ...defaultStyle,\n                ...transitionStyles[state],\n              }}\n            >\n              {this.state.inputProcessed === undefined && (\n                <div className=\"background\">\n                  <div className=\"loader\"></div>\n                </div>\n              )}\n            </div>\n          )}\n        </Transition>\n        <div className=\"top vertical\">\n          <AudioRecorder newRecording={this.handleRecording} />\n          <label className=\"styled-button horizontal\">\n            <div>Choose file</div>\n            <div id=\"chosen-file\">{this.state.filename}</div>\n            <input\n              id=\"choose-file\"\n              type=\"file\"\n              accept=\"audio/wav, audio/mp3\"\n              onChange={this.handleFile}\n              multiple={false}\n            />\n          </label>\n          <button\n            id=\"upload-button\"\n            className=\"styled-button narrow\"\n            onClick={this.sendFile}\n          >\n            Upload\n          </button>\n        </div>\n        <Model\n          id=\"model\"\n          animationStatus={this.state.animationStatus}\n          visemes={this.state.visemes}\n          sliderValue={this.state.sliderValue}\n        />\n        <div className=\"bottom horizontal\">\n          <button\n            id=\"play\"\n            className=\"player styled-button\"\n            onClick={this.playAnimation}\n          >\n            Play\n          </button>\n          <button\n            id=\"pause\"\n            className=\"player styled-button\"\n            onClick={this.pauseAnimation}\n          >\n            Pause\n          </button>\n          <button\n            id=\"stop\"\n            className=\"player styled-button\"\n            onClick={this.stopAnimation}\n          >\n            Stop\n          </button>\n          <span className=\"spacer\" />\n          <div id=\"slider-container\" className=\"player\">\n            <input\n              type=\"range\"\n              id=\"slider\"\n              min={0.1}\n              max={1}\n              value={this.state.sliderValue}\n              step={0.05}\n              onChange={this.handleSlider}\n            />\n            <div>{this.state.sliderValue}</div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default View;\n","// https://serverless-stack.com/chapters/create-a-login-page.html\nimport React, { Component } from \"react\";\nimport { Button, FormGroup, FormControl, FormLabel } from \"react-bootstrap\";\n// import \"./Login.css\";\nimport axios from 'axios';\nimport {login, authFetch, useAuth, logout} from \"../auth\"\n\nclass Login extends Component {\n  constructor(props){\n    super(props)\n    this.state={\n      username : \"\",\n      password : \"\",\n      status : \"FALSE\"\n    }\n  // const history = useHistory();\n  this.validateForm = this.validateForm.bind(this)\n  this.validateData = this.validateData.bind(this)\n  this.setUsername = this.setUsername.bind(this)\n  this.setPassword = this.setPassword.bind(this)\n  }\n\n  validateForm() {\n    return this.state.username.length > 0 && this.state.password.length > 0;\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n  }\n\n  async validateData(){\n    const userData = JSON.stringify({username : this.state.username, password : this.state.password})\n    const res = await axios.post('/api/login', userData, {});\n    var token = res.data\n    if(token.access_token){\n      login(token)\n      console.log(token)\n    }\n    else{\n      console.log(\"Please type in correct username/password\")\n    }\n  }\n\n  setUsername(e){\n    this.setState({\n      username: e.target.value\n    })\n  }\n\n  setPassword(e){\n    this.setState({\n      password: e.target.value\n    })\n  }\n\n  render(){\n    return (\n    <div className=\"Login\">\n      <form onSubmit={this.handleSubmit}>\n        <FormGroup id=\"username\" bssize=\"large\">\n          <FormLabel>Username</FormLabel>\n          <FormControl\n            id=\"username-form\"\n            autoFocus\n            type=\"text\"\n            value={this.state.username}\n            onChange={this.setUsername}\n          />\n        </FormGroup>\n        <FormGroup id=\"password\" bssize=\"large\">\n          <FormLabel>Password</FormLabel>\n          <FormControl\n            id=\"password-form\"\n            value={this.state.password}\n            onChange={this.setPassword}\n            type=\"password\"\n          />\n        </FormGroup>\n        <Button id=\"login-button\" block bssize=\"large\" disabled={!this.validateForm()} type=\"submit\" onClick={this.validateData}>\n          Login\n        </Button>\n      </form>\n    </div>\n  );\n  }\n}\n\nexport default Login;","import React from 'react';\nimport {\n  BrowserRouter,\n  Switch,\n  Route,\n  Redirect,\n  Link\n} from \"react-router-dom\";\nimport './App.css';\nimport View from './components/View.js'\nimport Login from \"./components/Login\";\n\nimport {login, authFetch, useAuth, logout} from \"./auth\"\n\n\nfunction App() {\n  const [logged] = useAuth();\n  console.log(logged)\n\n  return (\n    <div className=\"App\">\n      <BrowserRouter>\n        <Switch>\n          {!logged && <>\n          <Route path=\"/\">\n            <Login />\n          </Route>\n          <Redirect to=\"/\"/>\n          </>}\n          {logged && <>\n          <Route path=\"/lipsync\">\n            <View />\n          </Route>\n          <Redirect to=\"/lipsync\"/>\n          </>}\n        </Switch>\n      </BrowserRouter>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}